{"ast":null,"code":"import React,{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const GoogleAuth=_ref=>{let{onAuthSuccess,onAuthFailure}=_ref;const[isSignedIn,setIsSignedIn]=useState(false);useEffect(()=>{const loadGoogleAuth=()=>{window.gapi.load('client:auth2',initClient);};const initClient=()=>{window.gapi.client.init({apiKey:'AIzaSyAgLNdE8AzuxsQL4hzKg94Z65cFuNWTQfo',clientId:'19785403811-0rmm5ll7qhf52k96bbsk10f7kn8urur6.apps.googleusercontent.com',scope:'https://www.googleapis.com/auth/spreadsheets',discoveryDocs:['https://sheets.googleapis.com/$discovery/rest?version=v4'],ux_mode:'popup',cookie_policy:'single_host_origin'}).then(()=>{const authInstance=window.gapi.auth2.getAuthInstance();setIsSignedIn(authInstance.isSignedIn.get());authInstance.isSignedIn.listen(updateSigninStatus);if(authInstance.isSignedIn.get()){handleAuthSuccess(authInstance.currentUser.get());}}).catch(error=>{console.error('Error al inicializar el cliente:',error);if(onAuthFailure)onAuthFailure(error);});};// Cargar el script de Google API\nconst script=document.createElement('script');script.src='https://apis.google.com/js/api.js';script.onload=loadGoogleAuth;script.onerror=error=>{console.error('Error al cargar el script de Google API:',error);if(onAuthFailure)onAuthFailure(error);};document.body.appendChild(script);return()=>{document.body.removeChild(script);};},[onAuthSuccess,onAuthFailure]);const handleAuthSuccess=user=>{const token=user.getAuthResponse().access_token;if(onAuthSuccess)onAuthSuccess(token);};const handleSignInClick=()=>{window.gapi.auth2.getAuthInstance().signIn().then(user=>handleAuthSuccess(user)).catch(error=>{console.error('Error al iniciar sesión:',error);if(onAuthFailure)onAuthFailure(error);});};const handleSignOutClick=()=>{window.gapi.auth2.getAuthInstance().signOut().then(()=>{setIsSignedIn(false);if(onAuthFailure)onAuthFailure(new Error('Usuario cerró sesión'));});};return/*#__PURE__*/_jsx(\"div\",{children:!isSignedIn?/*#__PURE__*/_jsx(\"button\",{onClick:handleSignInClick,className:\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",children:\"Iniciar Sesi\\xF3n con Google\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSignOutClick,className:\"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded\",children:\"Cerrar Sesi\\xF3n\"})});};export default GoogleAuth;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}