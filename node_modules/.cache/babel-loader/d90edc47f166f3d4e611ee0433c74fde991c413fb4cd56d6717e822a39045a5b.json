{"ast":null,"code":"import React,{useEffect}from'react';import{MapContainer,TileLayer,Marker,Popup,useMap,useMapEvents}from'react-leaflet';import'leaflet/dist/leaflet.css';import L from'leaflet';// Corregir el problema del ícono del marcador por defecto\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',iconUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',shadowUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'});// Componente para manejar eventos y actualización del centro del mapa\nconst MapEventHandler=_ref=>{let{onMapClick}=_ref;const map=useMapEvents({click:e=>{if(onMapClick){// Obtener las coordenadas directamente del evento\nonMapClick({lat:e.latlng.lat,lng:e.latlng.lng});}}});return null;};// Componente para actualizar la vista del mapa cuando cambian las props\nconst MapUpdater=_ref2=>{let{center,zoom}=_ref2;const map=useMap();useEffect(()=>{map.setView(center,zoom);},[center,zoom,map]);return null;};const handleMapClick=e=>{if(e&&e.lat&&e.lng){setPointLocation({lat:e.lat,lng:e.lng});}};const LeafletMap=_ref3=>{let{center={lat:-12.0464,lng:-77.0428},zoom=12,points=[],onMapClick,className=''}=_ref3;return/*#__PURE__*/_jsx(\"div\",{className:`w-full h-[500px] ${className}`,children:/*#__PURE__*/_jsxs(MapContainer,{center:[center.lat,center.lng],zoom:zoom,className:\"h-full\",scrollWheelZoom:true,children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),points.map((point,index)=>/*#__PURE__*/_jsx(Marker,{position:[point.location.lat,point.location.lng],children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold\",children:point.name}),point.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:point.description})]})})},point.id||index)),/*#__PURE__*/_jsx(MapEventHandler,{onMapClick:onMapClick}),/*#__PURE__*/_jsx(MapUpdater,{center:[center.lat,center.lng],zoom:zoom})]})});};export default LeafletMap;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}