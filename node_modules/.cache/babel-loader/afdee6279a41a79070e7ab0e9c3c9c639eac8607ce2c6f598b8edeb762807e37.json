{"ast":null,"code":"import React,{useState,useEffect}from'react';import LeafletMap from'./LeafletMap';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ZoneCreator=_ref=>{let{zones,setZones,saveData,apiKey}=_ref;const[zoneName,setZoneName]=useState('');const[zoneDescription,setZoneDescription]=useState('');const[currentLocation,setCurrentLocation]=useState(null);const[mapCenter,setMapCenter]=useState({lat:-12.0464,lng:-77.0428});const getLocation=()=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>{const loc={lat:position.coords.latitude,lng:position.coords.longitude};setCurrentLocation(loc);setMapCenter(loc);},error=>alert(\"Error obteniendo ubicación: \"+error.message));}else{alert(\"Geolocalización no soportada por este navegador\");}};const handleMapClick=e=>{setCurrentLocation({lat:e.latLng.lat(),lng:e.latLng.lng()});};const handleSubmit=e=>{e.preventDefault();if(!zoneName||!currentLocation)return;const newZone={id:Date.now(),name:zoneName,description:zoneDescription,location:currentLocation,createdAt:new Date().toISOString()};const updatedZones=[...zones,newZone];setZones(updatedZones);saveData('zones',updatedZones);// Reset form\nsetZoneName('');setZoneDescription('');setCurrentLocation(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Crear Nueva Zona\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 mb-2\",children:\"Nombre de la Zona\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:zoneName,onChange:e=>setZoneName(e.target.value),className:\"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 mb-2\",children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"textarea\",{value:zoneDescription,onChange:e=>setZoneDescription(e.target.value),className:\"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:getLocation,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\",children:\"Usar Mi Ubicaci\\xF3n\"}),currentLocation&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 p-3 bg-blue-50 rounded\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-800\",children:[\"Ubicaci\\xF3n seleccionada: \",currentLocation.lat.toFixed(6),\", \",currentLocation.lng.toFixed(6)]})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-green-500 text-white py-2 rounded hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50\",disabled:!currentLocation,children:\"Guardar Zona\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow\",children:[/*#__PURE__*/_jsx(LeafletMap,{center:mapCenter,zoom:15,points:zones,onMapClick:handleMapClick,className:\"h-96\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col h-full overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 overflow-y-auto\"}),/*#__PURE__*/_jsx(\"div\",{className:\"relative\",children:/*#__PURE__*/_jsx(MapComponent,{onLocationSelect:handleLocationSelect,incidents:[]})})]})})]})]});};export default ZoneCreator;// DONE","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}