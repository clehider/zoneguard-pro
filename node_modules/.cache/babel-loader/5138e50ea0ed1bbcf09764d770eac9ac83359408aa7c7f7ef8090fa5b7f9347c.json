{"ast":null,"code":"import React,{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const GoogleAuth=_ref=>{let{onAuthSuccess,onAuthFailure}=_ref;const[isSignedIn,setIsSignedIn]=useState(false);useEffect(()=>{const loadGoogleAuth=()=>{window.gapi.load('client:auth2',initClient);};const initClient=()=>{window.gapi.client.init({apiKey:'AIzaSyAgLNdE8AzuxsQL4hzKg94Z65cFuNWTQfo',clientId:'19785403811-0rmm5ll7qhf52k96bbsk10f7kn8urur6.apps.googleusercontent.com',scope:'https://www.googleapis.com/auth/spreadsheets',discoveryDocs:['https://sheets.googleapis.com/$discovery/rest?version=v4']}).then(()=>{const authInstance=window.gapi.auth2.getAuthInstance();setIsSignedIn(authInstance.isSignedIn.get());authInstance.isSignedIn.listen(updateSigninStatus);if(authInstance.isSignedIn.get()){handleAuthSuccess(authInstance.currentUser.get());}}).catch(error=>{console.error('Error al inicializar el cliente:',error);if(onAuthFailure)onAuthFailure(error);});};// Cargar el script de Google API\nconst script=document.createElement('script');script.src='https://apis.google.com/js/api.js';script.onload=loadGoogleAuth;script.onerror=error=>{console.error('Error al cargar el script de Google API:',error);if(onAuthFailure)onAuthFailure(error);};document.body.appendChild(script);return()=>{document.body.removeChild(script);};},[onAuthSuccess,onAuthFailure]);const handleAuthSuccess=user=>{const token=user.getAuthResponse().access_token;if(onAuthSuccess)onAuthSuccess(token);};const handleSignInClick=()=>{window.gapi.auth2.getAuthInstance().signIn().then(user=>handleAuthSuccess(user)).catch(error=>{console.error('Error al iniciar sesión:',error);if(onAuthFailure)onAuthFailure(error);});};const handleSignOutClick=()=>{window.gapi.auth2.getAuthInstance().signOut().then(()=>{setIsSignedIn(false);if(onAuthFailure)onAuthFailure(new Error('Usuario cerró sesión'));});};return/*#__PURE__*/_jsx(\"div\",{children:!isSignedIn?/*#__PURE__*/_jsx(\"button\",{onClick:handleSignInClick,className:\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",children:\"Iniciar Sesi\\xF3n con Google\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSignOutClick,className:\"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded\",children:\"Cerrar Sesi\\xF3n\"})});};export default GoogleAuth;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","GoogleAuth","_ref","onAuthSuccess","onAuthFailure","isSignedIn","setIsSignedIn","loadGoogleAuth","window","gapi","load","initClient","client","init","apiKey","clientId","scope","discoveryDocs","then","authInstance","auth2","getAuthInstance","get","listen","updateSigninStatus","handleAuthSuccess","currentUser","catch","error","console","script","document","createElement","src","onload","onerror","body","appendChild","removeChild","user","token","getAuthResponse","access_token","handleSignInClick","signIn","handleSignOutClick","signOut","Error","children","onClick","className"],"sources":["E:/TRABAJOS NUEVOS/RIALTO PATROL/project/src/components/GoogleAuth.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nconst GoogleAuth = ({ onAuthSuccess, onAuthFailure }) => {\n  const [isSignedIn, setIsSignedIn] = useState(false);\n\n  useEffect(() => {\n    const loadGoogleAuth = () => {\n      window.gapi.load('client:auth2', initClient);\n    };\n\n    const initClient = () => {\n      window.gapi.client.init({\n        apiKey: 'AIzaSyAgLNdE8AzuxsQL4hzKg94Z65cFuNWTQfo',\n        clientId: '19785403811-0rmm5ll7qhf52k96bbsk10f7kn8urur6.apps.googleusercontent.com',\n        scope: 'https://www.googleapis.com/auth/spreadsheets',\n        discoveryDocs: ['https://sheets.googleapis.com/$discovery/rest?version=v4']\n      }).then(() => {\n        const authInstance = window.gapi.auth2.getAuthInstance();\n        \n        setIsSignedIn(authInstance.isSignedIn.get());\n        authInstance.isSignedIn.listen(updateSigninStatus);\n\n        if (authInstance.isSignedIn.get()) {\n          handleAuthSuccess(authInstance.currentUser.get());\n        }\n      }).catch(error => {\n        console.error('Error al inicializar el cliente:', error);\n        if (onAuthFailure) onAuthFailure(error);\n      });\n    };\n\n    // Cargar el script de Google API\n    const script = document.createElement('script');\n    script.src = 'https://apis.google.com/js/api.js';\n    script.onload = loadGoogleAuth;\n    script.onerror = (error) => {\n      console.error('Error al cargar el script de Google API:', error);\n      if (onAuthFailure) onAuthFailure(error);\n    };\n    document.body.appendChild(script);\n\n    return () => {\n      document.body.removeChild(script);\n    };\n  }, [onAuthSuccess, onAuthFailure]);\n\n  const handleAuthSuccess = (user) => {\n    const token = user.getAuthResponse().access_token;\n    if (onAuthSuccess) onAuthSuccess(token);\n  };\n\n  const handleSignInClick = () => {\n    window.gapi.auth2.getAuthInstance().signIn()\n      .then(user => handleAuthSuccess(user))\n      .catch(error => {\n        console.error('Error al iniciar sesión:', error);\n        if (onAuthFailure) onAuthFailure(error);\n      });\n  };\n\n  const handleSignOutClick = () => {\n    window.gapi.auth2.getAuthInstance().signOut()\n      .then(() => {\n        setIsSignedIn(false);\n        if (onAuthFailure) onAuthFailure(new Error('Usuario cerró sesión'));\n      });\n  };\n\n  return (\n    <div>\n      {!isSignedIn ? (\n        <button\n          onClick={handleSignInClick}\n          className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\n        >\n          Iniciar Sesión con Google\n        </button>\n      ) : (\n        <button\n          onClick={handleSignOutClick}\n          className=\"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded\"\n        >\n          Cerrar Sesión\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default GoogleAuth;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}