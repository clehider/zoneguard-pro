{"ast":null,"code":"import React,{useState}from'react';import{MapContainer,TileLayer,Marker,Popup,useMapEvents}from'react-leaflet';import'leaflet/dist/leaflet.css';import L from'leaflet';// Corregir el problema de los iconos de Leaflet\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:require('leaflet/dist/images/marker-icon-2x.png'),iconUrl:require('leaflet/dist/images/marker-icon.png'),shadowUrl:require('leaflet/dist/images/marker-shadow.png')});const LocationMarker=_ref=>{let{onLocationSelect}=_ref;const[position,setPosition]=useState(null);useMapEvents({click(e){const pos=e.latlng;setPosition(pos);if(onLocationSelect){onLocationSelect(pos);}},dragend(){const map=useMap();const center=map.getCenter();setPosition(center);if(onLocationSelect){onLocationSelect(center);}}});return position===null?null:/*#__PURE__*/_jsx(Marker,{position:position,children:/*#__PURE__*/_jsx(Popup,{children:\"Ubicaci\\xF3n seleccionada\"})});};const MapComponent=_ref2=>{let{incidents,onLocationSelect}=_ref2;const defaultPosition=[19.4326,-99.1332];const[map,setMap]=useState(null);return/*#__PURE__*/_jsxs(MapContainer,{center:defaultPosition,zoom:13,style:{height:'100%',width:'100%'},whenCreated:setMap,scrollWheelZoom:true,doubleClickZoom:true,dragging:true,zoomControl:true,keyboard:true,touchZoom:true,boxZoom:true,children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"}),/*#__PURE__*/_jsx(LocationMarker,{onLocationSelect:onLocationSelect}),incidents.map((incident,index)=>/*#__PURE__*/_jsx(Marker,{position:[incident.location.lat,incident.location.lng],children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold\",children:incident.type}),/*#__PURE__*/_jsx(\"p\",{children:incident.description}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Estado: \",incident.status]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Asignado a: \",incident.assignedTo]})]})})},index))]});};export default MapComponent;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}